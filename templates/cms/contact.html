{% extends 'layout.html' %}

{% block content %}
<!-- Hero Section -->
<section class="relative bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-blue-900 dark:to-purple-900 py-20">
    <div class="absolute inset-0 opacity-20 dark:opacity-20">
        <div class="absolute top-10 left-10 w-72 h-72 bg-blue-300 dark:bg-blue-500 rounded-full mix-blend-multiply filter blur-xl animate-pulse"></div>
        <div class="absolute top-0 right-4 w-72 h-72 bg-purple-300 dark:bg-purple-500 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-2000"></div>
    </div>

    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center">
            <div class="inline-flex items-center px-4 py-2 rounded-full bg-blue-100/80 dark:bg-white/10 backdrop-blur-sm border border-blue-200 dark:border-white/20 text-sm font-medium mb-8">
                <i class="fas fa-envelope mr-2 text-sivas-600 dark:text-cyan-400"></i>
                <span class="text-blue-800 dark:text-white">7/24 İletişim</span>
            </div>

            <h1 class="text-4xl md:text-6xl py-2 font-black mb-6 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 dark:from-cyan-400 dark:via-blue-400 dark:to-purple-400 bg-clip-text text-transparent">
                Bizimle İletişime Geçin
            </h1>

            <p class="text-xl md:text-2xl mb-8 text-gray-700 dark:text-gray-300 max-w-3xl mx-auto">
                Akıllı şehir projelerimiz hakkında sorularınız mı var? Size yardımcı olmaktan mutluluk duyarız.
            </p>
        </div>
    </div>
</section>

<!-- Contact Section -->
<section class="py-16 bg-white dark:bg-gray-900">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-16">
            <!-- Contact Information -->
            <div class="space-y-8">
                <div>
                    <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-6">
                        İletişim Bilgileri
                    </h2>
                    <p class="text-gray-600 dark:text-gray-300 text-lg">
                        Sivas Belediyesi Akıllı Şehir Müdürlüğü olarak, şehrimizin dijital dönüşümünde vatandaşlarımızın görüş ve önerilerini dinlemeye hazırız.
                    </p>
                </div>

                <!-- Contact Cards -->
                <div class="space-y-6">
                    <!-- Address -->
                    <div class="group bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-800 dark:to-gray-700 p-6 rounded-2xl border border-blue-100 dark:border-gray-600 hover:shadow-lg transition-all duration-300">
                        <div class="flex items-start space-x-4">
                            <div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform">
                                <i class="fas fa-map-marker-alt text-white text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Adres</h3>
                                <p class="text-gray-600 dark:text-gray-300">
                                    Sivas Belediyesi<br>
                                    Akıllı Şehir Müdürlüğü<br>
                                    58040 Sivas/Türkiye
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Phone -->
                    <div class="group bg-gradient-to-r from-green-50 to-emerald-50 dark:from-gray-800 dark:to-gray-700 p-6 rounded-2xl border border-green-100 dark:border-gray-600 hover:shadow-lg transition-all duration-300">
                        <div class="flex items-start space-x-4">
                            <div class="w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform">
                                <i class="fas fa-phone text-white text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Telefon</h3>
                                <p class="text-gray-600 dark:text-gray-300">
                                    <a href="tel:+903462210110" class="hover:text-green-600 dark:hover:text-green-400 transition-colors">
                                        +90 (346) 221 01 10
                                    </a>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Email -->
                    <div class="group bg-gradient-to-r from-purple-50 to-pink-50 dark:from-gray-800 dark:to-gray-700 p-6 rounded-2xl border border-purple-100 dark:border-gray-600 hover:shadow-lg transition-all duration-300">
                        <div class="flex items-start space-x-4">
                            <div class="w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform">
                                <i class="fas fa-envelope text-white text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">E-posta</h3>
                                <p class="text-gray-600 dark:text-gray-300">
                                    <a href="mailto:akillisehir@sivas.bel.tr" class="hover:text-purple-600 dark:hover:text-purple-400 transition-colors">
                                        akillisehir@sivas.bel.tr
                                    </a>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Working Hours -->
                    <div class="group bg-gradient-to-r from-amber-50 to-orange-50 dark:from-gray-800 dark:to-gray-700 p-6 rounded-2xl border border-amber-100 dark:border-gray-600 hover:shadow-lg transition-all duration-300">
                        <div class="flex items-start space-x-4">
                            <div class="w-12 h-12 bg-gradient-to-r from-amber-500 to-orange-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform">
                                <i class="fas fa-clock text-white text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Çalışma Saatleri</h3>
                                <p class="text-gray-600 dark:text-gray-300">
                                    Pazartesi - Cuma: 08:00 - 17:00<br>
                                    Cumartesi - Pazar: Kapalı
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contact Form -->
            <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8 border border-gray-100 dark:border-gray-700">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">
                        Mesaj Gönder
                    </h2>
                    <p class="text-gray-600 dark:text-gray-300">
                        Formu doldurarak bize ulaşabilirsiniz. En kısa sürede size dönüş yapacağız.
                    </p>
                </div>

                {% if messages %}
                    {% for message in messages %}
                        <div class="mb-6 p-4 rounded-lg {% if message.tags == 'success' %}bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-300 border border-green-200 dark:border-green-700{% elif message.tags == 'error' %}bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-300 border border-red-200 dark:border-red-700{% endif %}">
                            <div class="flex items-center">
                                <i class="fas {% if message.tags == 'success' %}fa-check-circle{% elif message.tags == 'error' %}fa-exclamation-triangle{% endif %} mr-3"></i>
                                {{ message }}
                            </div>
                        </div>
                    {% endfor %}
                {% endif %}

                <form method="POST" class="space-y-6">
                    {% csrf_token %}
                    
                    <!-- Name and Email -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                Ad Soyad *
                            </label>
                            {{ form.name }}
                            {% if form.name.errors %}
                                <div class="mt-1 text-sm text-red-600 dark:text-red-400">
                                    {{ form.name.errors.0 }}
                                </div>
                            {% endif %}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                E-posta *
                            </label>
                            {{ form.email }}
                            {% if form.email.errors %}
                                <div class="mt-1 text-sm text-red-600 dark:text-red-400">
                                    {{ form.email.errors.0 }}
                                </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Phone and Organization -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                Telefon
                            </label>
                            {{ form.phone }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                Kurum/Şirket
                            </label>
                            {{ form.organization }}
                        </div>
                    </div>

                    <!-- Subject -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            Konu *
                        </label>
                        {{ form.subject }}
                    </div>

                    <!-- Title -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            Başlık *
                        </label>
                        {{ form.title }}
                        {% if form.title.errors %}
                            <div class="mt-1 text-sm text-red-600 dark:text-red-400">
                                {{ form.title.errors.0 }}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Message -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            Mesaj *
                        </label>
                        {{ form.message }}
                        {% if form.message.errors %}
                            <div class="mt-1 text-sm text-red-600 dark:text-red-400">
                                {{ form.message.errors.0 }}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Submit Button -->
                    <div class="pt-4">
                        <button type="submit" class="w-full bg-gradient-to-r from-sivas-500 to-blue-600 dark:from-cyan-500 dark:to-blue-600 text-white px-8 py-4 rounded-xl font-semibold hover:from-sivas-600 hover:to-blue-700 dark:hover:from-cyan-600 dark:hover:to-blue-700 transform hover:scale-105 transition-all duration-300 shadow-lg">
                            <i class="fas fa-paper-plane mr-3"></i>
                            Mesaj Gönder
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

<!-- Map Section -->
<section class="py-16 bg-gray-50 dark:bg-gray-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
            <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">
                Konum
            </h2>
            <p class="text-gray-600 dark:text-gray-300">
                Sivas Belediyesi Akıllı Şehir Müdürlüğü ofisimizi haritada görüntüleyin.
            </p>
        </div>

        <div class="bg-white dark:bg-gray-900 rounded-3xl shadow-2xl overflow-hidden border border-gray-100 dark:border-gray-700">
            <div id="map" class="h-96 w-full"></div>
        </div>
    </div>
</section>

<!-- Leaflet CSS and JS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Sivas Belediyesi koordinatları
    const lat = 39.7502739;
    const lng = 37.0168792;
    
    // Haritayı oluştur
    const map = L.map('map').setView([lat, lng], 15);
    
    // OpenStreetMap tile layer ekle
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);
    
    // Marker ekle
    const marker = L.marker([lat, lng]).addTo(map);
    
    // Popup ekle
    marker.bindPopup(`
        <div class="text-center p-2">
            <h3 class="font-bold text-lg mb-2">Sivas Belediyesi</h3>
            <p class="text-sm text-gray-600 mb-2">Akıllı Şehir Müdürlüğü</p>
            <p class="text-xs text-gray-500">58040 Sivas/Türkiye</p>
        </div>
    `).openPopup();
    
    // Harita dark mode desteği
    const isDark = document.documentElement.classList.contains('dark');
    if (isDark) {
        // Dark mode için farklı tile layer
        map.removeLayer(map._layers[Object.keys(map._layers)[0]]);
        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
            attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors © <a href="https://carto.com/attributions">CARTO</a>'
        }).addTo(map);
    }
});
</script>
{% endblock %}